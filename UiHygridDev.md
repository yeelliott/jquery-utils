# ui.hygrid.js (dev) #

| **Author** | Copyright (c) 2009 Maxime Haineault ([haineault.com](http://haineault.com)) |
|:-----------|:----------------------------------------------------------------------------|
| **License** | [MIT License](http://www.opensource.org/licenses/mit-license.php) |

## Core ##

### Methods ###

| **Property** | **Arguments** | **Description** |
|:-------------|:--------------|:----------------|
| `params` | ` ` | Returns the parameters passed to the backend as object |
| `cols` | `(bool) visible` | Returns the columns count (only the visible if true is specified) |
| `col` | `(int) index, (bool) excludeHeaders` | Return a column by index |
| `row` | `(int) index OR (array) row` | Return a row by index or create a row |
| `cell` | `(int) x, (int) y, (bool) visible` | Return a cell by x, y position in the grid, if visible is true hidden cells will be ignored |
| `cells` | `(bool) visibleOnly` | Return grid's cells |
| `_init` | ` ` | Grid initialization (first method to be called) |
problem 
| `trigger` | `(string) type` | Public trigger method (temporary hopefully) |
| `_trigger` | `(string) type, (object) event, (object) ui` | Trigger an event |
| `_setGridWidth` | ` ` | Apply the grid's width |
| `_createRow` | `(array) cells` | Creates and insert grid rows |
| `_createCell` | `(object) cell, (string) type` | Creates and returns a grid cell (td or th) |
| `_applyCellModifiers` | `(object) el, (object) cell, (int) col` | Applies cell modifiers to a given element |
| `_setColOptions` | `(int) index, (string) option, value` | Sets col options for a given col |
| `_getColOptions` | `(int) index, (string) option` | Returns col options for a given col |
| `_` | `(string) key, value` | Used to store/retrieve UI elements |

### Templates ###

Most of the HTML generated by the grid is managed with a small template system described in this [blog post](http://haineault.com/blog/82/). The documentation is available [here](StringFormat.md).

## Plugins ##

The plugin architecture is made in a even driven fashion, which make it easier to keep things clean and encapsulated.

### Basic structure ###

```

$.ui.plugin.add('hygrid', 'pluginName', {
    eventName: function(e, ui) {
        // do stuff
    }
});

```

Of course e is the event object and ui the plugin instance, which makes it possible to override any of the grid property.

### Options ###

Each plugin can add its own options and defaults, simply extend `$.ui.hygrid.defaults` like this;

```

$.ui.hygrid.defaults.pagination = true;

// or if you have many defaults to add;

$.extend($.ui.hygrid.defaults, {
    pagination: true,
    page: 1,
    rpp: 10
});

```

It's also possible to change options at initialization time. For example, the pagination plugin must ensure that the bottom toolbar is enabled in order to work properly. So if the user enable the pagination plugin it will automatically enable the toolbar, even if it's disabled.

It can be achieved like this;

```

$.ui.plugin.add('hygrid', 'pagination', {
    initialize: function(e, ui) {
        ui.options.toolbarBottom = true;
    }
});
```

## Cell modifiers ##

When creating a grid, it's mandatory to specify the cells and how they behave.

The `cols` options takes an array of object and each object is a cell descriptor containing modifiers, like this;

```
$('#demo').hygrid({
    cols: [
        {label: 'ISO',  name: 'iso',  width: 40, sortable: true, align: 'center'}
    ]
});
```

Cell modifiers are extensible through the plugin architecture as well. The grid provide only basic modifiers (label, align, width and hide).

Let's see how the `align` and `format` modifiers works;

```

$.ui.datagrid.cellModifiers = {

    align: function(el, cell){ 
        el.css('text-align', cell.align); 
    },

    format:  function(el, cell){ 
        if (cell.isTD) {
            el.text($.format(cell.format, el.text())); 
        }
    }

}

```

The modifiers are used solely to manipulate grid cells and grid headers. As you can see, they receive everything they needs to work; the cell element and the cell options.

## Build system ##

To use the build system you will have to checkout the jquery-utils project on a Linux box and run the build.py script from the root of the working copy.

The script will scan for build.yml files subfolders and process them all. If you dont wan't to build everything each time you can specify the module you want to build:

```

/www/jquery-utils $: python build.py -m -o uihygrid

```

The YAML file you'll want to modify to customize your build is `standalone/ui-hygrid/build.yaml`

The `-m` switch tells the script to create the minified version, complete documentation of the build system is available [here](BuildSystem.md).